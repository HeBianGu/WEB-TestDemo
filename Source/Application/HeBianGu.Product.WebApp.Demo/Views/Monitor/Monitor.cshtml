@model IEnumerable<HeBianGu.Product.Respository.Model.MonitorViewModel>

@{
	ViewData["Title"] = "Monitor";
	Layout = "~/Views/Shared/_Start.cshtml";
}

@*<p>
		@await Html.PartialAsync("_MonitorCenter")
	</p>*@

<div class="x_content">
	<div class="row">
		<div class="col-md-12">
			<div class="x_panel">
				<div class="x_title">
					<h2>智能养老床垫监测 <small> 一号楼 </small></h2>

					<ul class="nav navbar-right panel_toolbox">
						<li>
							<a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
						</li>

						<li class="dropdown">
							<a class="dropdown-toggle" role="button" aria-expanded="false" href="#" data-toggle="dropdown"><i class="fa fa-wrench"></i></a>
							<ul class="dropdown-menu" role="menu">
								<li>
									<a asp-controller="Monitor" asp-action="Index">监控设置</a>
								</li>
								<li>
									<a asp-controller="Monitor" asp-action="Create">新增监控</a>
								</li>
							</ul>
						</li>
						<li>
							<a class="close-link"><i class="fa fa-close"></i></a>
						</li>
					</ul>

					<div class="clearfix"></div>
				</div>

				<div id="div-part" />

			</div>
		</div>
	</div>
</div>

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true">
	<div class="modal-dialog modal-lg" style="width:90%;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">
					<span aria-hidden="true">×</span>
				</button>
				<h4 class="modal-title" id="myModalLabel">实时信息</h4>
			</div>
			<div class="modal-body">
				@*<h4>Text in a modal</h4>*@

				<div id="div-realpart">

				</div>
				@*<p>Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>
					<p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p>*@
			</div>
			<div class="modal-footer">
				@*<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>*@
				<button type="button" data-dismiss="modal" class="btn btn-primary">关闭</button>
			</div>
		</div>
	</div>
</div> 
<!-- Custom Theme Scripts -->
<script src="../build/js/custom.min.js"></script>

<script type="text/javascript">
	function getUserInfo() {

		$.ajax({

			url: 'RefreshMonitor',

			data: {},

			type: "POST",

			//dataType: "json",

			async: false,

			success: function (data) {

				$("#div-part").html(data);

				console.log("刷新..");

				//var echartBar = document.getElementById('main');

				//console.log(echartBar);


			},

			error: function (XMLHttpRequest, textStatus, errorThrown) {

				alert("异常");
			}
		});
	}

	setInterval(getUserInfo, 2000);

	function getRealLine(obj) {

		//var thisObj = ${ obj };
		//var userId = thsiObj.attr("userId");
		//alert(userId);

		//alert(obj);

		$.ajax({

			url: 'ShowRealLine',

			data: { id: obj },

			type: "POST",

			//dataType: "json",

			async: false,

			success: function (data) {

				$("#div-realpart").html(data);

				console.log("刷新..");

				//var echartBar = document.getElementById('main');

				//console.log(echartBar);


			},

			error: function (XMLHttpRequest, textStatus, errorThrown) {

				alert("异常");
			}
		});
	}


</script>
